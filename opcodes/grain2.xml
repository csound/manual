
<refentry id="grain2">
  <indexterm id="IndexGrain2"><primary>grain2</primary></indexterm>
  <refentryinfo><title>Signal Generators:Granular Synthesis</title></refentryinfo>
  <refmeta>
    <refentrytitle>grain2</refentrytitle>
  </refmeta>



  <refnamediv>
    <refname>grain2</refname>
    <refpurpose>
      Easy-to-use granular synthesis texture generator.
          </refpurpose>
  </refnamediv>
  
  <refsect1>
    <title>Description</title>
    <para>
      Generate granular synthesis textures. <emphasis>grain2</emphasis> is simpler to use, but <link linkend="grain3"><citetitle>grain3</citetitle></link> offers more control.
    </para>
  </refsect1>

  <refsect1>
    <title>Syntax</title>
    <synopsis>ares <command>grain2</command> kcps, kfmd, kgdur, iovrlp, kfn, iwfn [, irpow] \
      [, iseed] [, imode]</synopsis>
  </refsect1>

  <refsect1>
    <title>Initialization</title>
    <para>
      <emphasis>iovrlp</emphasis> -- (fixed) number of overlapping grains.
    </para>

    <para>
      <emphasis>iwfn</emphasis> -- function table containing window waveform (Use <link linkend="GEN20">GEN20</link> to calculate <emphasis>iwfn</emphasis>).
    </para>

    <para>
      <emphasis>irpow</emphasis> (optional, default=0) -- this value controls the distribution of grain frequency variation.  If <emphasis>irpow</emphasis> is positive, the random distribution (<emphasis>x</emphasis> is in the range -1 to 1) is <literallayout>abs(x) &circ; ((1 / irpow) - 1);</literallayout> for negative <emphasis>irpow</emphasis> values, it is <literallayout>(1 - abs(x)) &circ; ((-1 / irpow) - 1)</literallayout>Setting <emphasis>irpow</emphasis> to -1, 0, or 1 will result in uniform distribution (this is also faster to calculate). The image below shows some examples for <emphasis>irpow</emphasis>. The default value of <emphasis>irpow</emphasis> is 0.
    </para>

    <para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/grain2_rand-448x289.png" format="PNG"/>
        </imageobject>

        <textobject>
          <phrase>[A graph of distributions for different values of <emphasis>irpow</emphasis>.]</phrase>
        </textobject>

        <caption>
          <para>A graph of distributions for different values of <emphasis>irpow</emphasis>.</para>
        </caption>
      </mediaobject>
    </para>

    <para>
      <emphasis>iseed</emphasis> (optional, default=0) -- seed value for random number generator (positive integer in the range 1 to 2147483646 (2<superscript>31</superscript> - 2)). Zero or negative value seeds from current time (this is also the default).
    </para>

    <para>
      <emphasis>imode</emphasis> (optional default=0) -- sum of the following values:
      <itemizedlist>
        <listitem><para><emphasis>8:</emphasis> interpolate window waveform (slower).</para></listitem>
        <listitem><para><emphasis>4:</emphasis> do not interpolate grain waveform (fast, but lower quality).</para></listitem>
        <listitem><para><emphasis>2:</emphasis> grain frequency is continuously modified by <emphasis>kcps</emphasis> and <emphasis>kfmd</emphasis> (by default, each grain keeps the frequency it was launched with). This may be slower at high control rates.</para></listitem>
        <listitem><para><emphasis>1:</emphasis> skip initialization.</para></listitem>
      </itemizedlist>
    </para>

  </refsect1>

  <refsect1>
    <title>Performance</title>
    <para>
      <emphasis>ares</emphasis> -- output signal.
    </para>

    <para>
      <emphasis>kcps</emphasis> -- grain frequency in Hz.
    </para>

    <para>
      <emphasis>kfmd</emphasis> -- random variation (bipolar) in grain frequency in Hz.
    </para>

    <para>
      <emphasis>kgdur</emphasis> -- grain duration in seconds. <emphasis>kgdur</emphasis> also controls the duration of already active grains (actually the speed at which the window function is read). This behavior does not depend on the <emphasis>imode</emphasis> flags.
    </para>

    <para>
      <emphasis>kfn</emphasis> -- function table containing grain waveform. Table number can be changed at k-rate (this is useful to select from a set of band-limited tables generated by <link linkend="GEN30">GEN30</link>, to avoid aliasing).
    </para>

    <note>
      <title>Note</title>
      <para>
        <emphasis>grain2</emphasis> internally uses the same random number generator as <emphasis>rnd31</emphasis>. So reading <link linkend="rnd31"><citetitle>its documentation</citetitle></link> is also recommended.
      </para>
    </note>
  </refsect1>

  <refsect1>
    <title>Examples</title>
    <para>
      Here is an example of the grain2 opcode. It uses the file <ulink url="examples/grain2.csd"><citetitle>grain2.csd</citetitle></ulink>.

      <example>
        <title>Example of the grain2 opcode.</title>

        <para>See the sections <link linkend="UsingRealTime"><citetitle>Real-time Audio</citetitle></link> and <link linkend="CommandFlags"><citetitle>Command Line Flags</citetitle></link> for more information on using command line flags.</para>
          <xi:include href="examples-xml/grain2.csd.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
      </example>
    </para>
  </refsect1>

  <refsect1>
    <title>See Also</title>
    <para>
      <link linkend="SiggenGranular"><citetitle>Granular Synthesis</citetitle></link>
    </para>
  </refsect1>

  <refsect1>
    <title>Credits</title>
    <para>
      <simplelist>
        <member>Author: &nameistvan;</member>
      </simplelist>
    </para>

    <para>New in version 4.15</para>
    <para>Updated April 2002 by &nameistvan;</para>
  </refsect1>
</refentry>
