
<refentry id="splitrig">
<indexterm id="Indexsplitrig"><primary>splitrig</primary></indexterm>
  <refentryinfo><title>Instrument Control:Sensing and Control</title></refentryinfo>
  <refmeta>
    <refentrytitle>splitrig</refentrytitle>
  </refmeta>

  <refnamediv>
    <refname>splitrig</refname>
    <refpurpose>
      Split a trigger signal
    </refpurpose>
  </refnamediv>
 
  <refsect1>
    <title>Description</title>
    <para>
      <emphasis>splitrig</emphasis> splits a trigger signal (i.e. a timed sequence of control-rate impulses) into several channels following a structure designed by the user.
    </para>
  </refsect1>
 
  <refsect1>
    <title>Syntax</title>
    <synopsis><command>splitrig</command> ktrig, kndx, imaxtics, ifn, kout1 [,kout2,...,koutN]</synopsis>
  </refsect1>
 
    <refsect1>
    <title>Initialization</title>
    <para>
      <emphasis>imaxtics</emphasis> - number of tics belonging to largest pattern
    </para>
    <para>
      <emphasis>ifn</emphasis> - number of table containing channel-data structuring
    </para>
  </refsect1>
  <refsect1>
    <title>Performance</title>
    <para>
      <emphasis>asig</emphasis> - incoming (input) signal
    </para>
    <para>
      <emphasis>ktrig</emphasis> - trigger signal
    </para>
    <para>
      The <emphasis>splitrig</emphasis> opcode splits a trigger signal into several output channels according to one or more patterns provided by the user. Normally the regular timed trigger signal generated by metro opcode is used to be transformed into rhythmic pattern that can trig several independent melodies or percussion riffs. But you can also start from non-isocronous trigger signals. This allows to use some "interpretative" and less "mechanic" groove variations.

Patterns are looped and each numtics_of_pattern_N the cycle is repeated. 
    </para>
    <para>
The scheme of patterns is defined by the user and is stored into <emphasis>ifn</emphasis> table according to the following format:
    </para>
    <para>
            <programlisting>
<xi:include href="opcodes/splitrig.txt" parse="text" xmlns:xi="http://www.w3.org/2001/XInclude"/>
        </programlisting>
   </para>
   <para>
This scheme can contain more than one pattern, each one with a different number of rows. Each pattern is preceded by a a special row containing a single <emphasis>numtics_of_pattern_N</emphasis> field; this field expresses the number of tics that makes up the corresponding pattern. Each pattern's row makes up a tic.  Each pattern's column corresponds to a channel, and each field of a row is a number that makes up the value outputted by the corresponding <emphasis>koutXX</emphasis> channel (if number is a zero, corresponding output channel will not trigger anything in that particular arguments). Obviously, all rows must contain the same number of fields that must be equal to the number of <emphasis>koutXX</emphasis> channel. All patterns must contain the same number of rows, this number must be equal to the largest pattern and is defined by <emphasis>imaxtics</emphasis> variable. Even if a pattern has less tics than the largest pattern, it must be made up of the same number of rows, in this case, some of these rows, at the end of the pattern itself, will not be used (and can be set to any value, because it doesn't matter).
   </para>
    <para>
The <emphasis>kndx</emphasis> variable chooses the number of the pattern to be played, zero indicating the first pattern. Each time the integer part of <emphasis>kndx</emphasis> changes, tic counter is reset to zero.
    </para>
    <para>
    Patterns are looped and each <emphasis>numtics_of_pattern_N</emphasis> the cycle is repeated.
    </para>
    <para>examples
      4 - calculate average value of asig in the time interval
    </para>
    <para>
      This opcode can be useful in several situations, for example to implement a vu-meter 
    </para>

  </refsect1>
  
    <refsect1>
    <title>Examples</title>
    <para>
      Here is an example of splitrig opcode. It uses the file <ulink url="examples/splitrig.csd"><citetitle>splitrig.csd</citetitle></ulink>.
      <example>
        <title>Example of the splitrig opcode.</title>
        <para>See the sections <link linkend="UsingRealTime"><citetitle>Real-time Audio</citetitle></link> and <link linkend="CommandFlags"><citetitle>Command Line Flags</citetitle></link> for more information on using command line flags.</para>
          <xi:include href="examples-xml/oscbnk.csd.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
      </example>
    </para>
  </refsect1>
 
  <refsect1>
    <title>Credits</title>
    <para>Written by &namegabriel;.</para>
    <para>New in Csound 5 (Previously available only on CsoundAV)</para>
  </refsect1>
</refentry>
